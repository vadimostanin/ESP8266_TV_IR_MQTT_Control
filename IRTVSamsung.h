#ifndef __IRTV_SAMSUNG_H__
#define __IRTV_SAMSUNG_H__
#include "IRTVBase.h"
#include <map>

namespace
{
  uint16_t rawDataSamsungPowerOn[] = {4536, 4440,  620, 1638,  618, 1638,  618, 1638,  618, 510,  618, 510,  616, 512,  616, 510,  618, 510,  618, 1638,  620, 1638,  618, 1638,  618, 510,  618, 512,  616, 510,  616, 510,  618, 510,  616, 510,  618, 1638,  618, 1638,  618, 510,  618, 510,  618, 1638,  618, 1638,  618, 1638,  620, 1638,  618, 510,  616, 510,  616, 1640,  618, 1638,  618, 510,  616, 512,  616, 512,  618, 45958,  4530, 4448,  618, 1640,  618, 1638,  618, 1638,  620, 510,  616, 512,  616, 510,  616, 510,  618, 510,  618, 1638,  618, 1638,  618, 1638,  618, 510,  618, 510,  618, 510,  618, 510,  618, 510,  616, 510,  618, 1638,  618, 1638,  618, 510,  618, 510,  618, 1638,  618, 1640,  618, 1638,  618, 1638,  618, 510,  618, 512,  616, 1638,  618, 1638,  620, 510,  624, 504,  618, 510,  618};  // SAMSUNG E0E06798
  uint16_t rawDataSamsungVolumeUp[] = {4532, 4444,  614, 1632,  616, 1632,  614, 1634,  614, 516,  612, 514,  612, 516,  614, 514,  614, 530,  596, 1636,  612, 1636,  612, 1634,  612, 516,  612, 530,  598, 516,  612, 516,  612, 516,  612, 1636,  612, 1636,  614, 1636,  612, 516,  612, 514,  614, 516,  612, 510,  610, 464,  670, 516,  612, 516,  612, 516,  614, 1632,  612, 1636,  612, 1636,  612, 1636,  612, 1636,  638, 46040,  4528, 4446,  612, 1634,  612, 1636,  612, 1636,  612, 516,  610, 516,  610, 518,  612, 516,  612, 516,  610, 1638,  614, 1636,  612, 1636,  612, 518,  610, 516,  614, 514,  610, 516,  612, 516,  612, 1636,  612, 1636,  610, 1632,  618, 516,  610, 518,  610, 518,  610, 516,  610, 516,  610, 518,  610, 518,  610, 518,  610, 1638,  612, 1636,  610, 1636,  612, 1636,  610, 1638,  612};  // SAMSUNG E0E0E01F
  uint16_t rawDataSamsungVolumeDown[] = {4522, 4452,  610, 1636,  610, 1640,  610, 1636,  610, 518,  608, 520,  610, 516,  612, 518,  608, 518,  610, 1638,  582, 1666,  610, 1638,  610, 518,  610, 516,  608, 520,  610, 518,  608, 528,  600, 1638,  582, 1664,  610, 518,  610, 1638,  610, 518,  610, 518,  608, 520,  610, 516,  606, 520,  610, 518,  610, 1636,  606, 522,  610, 1638,  582, 1666,  582, 1666,  608, 1638,  608, 46068,  4530, 4444,  610, 1636,  608, 1640,  610, 1636,  582, 544,  604, 518,  612, 520,  608, 518,  608, 520,  606, 1640,  610, 1638,  608, 1638,  608, 520,  604, 522,  610, 518,  606, 520,  582, 548,  608, 1640,  608, 1640,  610, 518,  608, 1638,  608, 520,  608, 520,  606, 522,  608, 520,  606, 520,  606, 520,  606, 1638,  582, 548,  608, 1640,  606, 1640,  606, 1640,  606, 1642,  580};  // SAMSUNG E0E0D02F
  uint16_t rawDataSamsungVolumeMuteUnmute[] = {4498, 4480,  578, 1668,  606, 1642,  578, 1670,  580, 548,  578, 548,  606, 522,  578, 550,  606, 520,  576, 1670,  606, 1642,  604, 1642,  580, 550,  602, 526,  604, 522,  580, 548,  604, 524,  602, 1644,  604, 1644,  604, 1642,  580, 1666,  580, 550,  578, 550,  578, 550,  602, 524,  602, 524,  574, 550,  580, 550,  580, 548,  578, 1670,  578, 1668,  606, 1642,  606, 1642,  578, 46094,  4516, 4456,  576, 1652,  600, 1670,  578, 1670,  578, 548,  604, 522,  578, 550,  576, 550,  578, 550,  602, 1644,  578, 1670,  604, 1644,  604, 524,  578, 550,  604, 524,  578, 548,  578, 548,  578, 1670,  578, 1668,  578, 1670,  604, 1644,  578, 550,  576, 546,  576, 554,  580, 548,  604, 524,  576, 550,  578, 550,  578, 550,  576, 1670,  602, 1644,  578, 1670,  578, 1670,  578};  // SAMSUNG E0E0F00F
  uint16_t rawDataSamsungChannelUp[] = {4532, 4442,  610, 1638,  634, 1614,  610, 1588,  658, 498,  656, 490,  612, 514,  614, 514,  612, 520,  612, 1636,  612, 1634,  616, 1634,  612, 514,  612, 514,  614, 514,  612, 514,  612, 514,  614, 512,  614, 1634,  612, 516,  614, 514,  610, 1636,  614, 516,  612, 514,  612, 516,  614, 1634,  614, 514,  614, 1632,  614, 1634,  614, 512,  614, 1634,  614, 1634,  614, 1634,  614, 46066,  4532, 4444,  616, 1632,  614, 1634,  614, 1632,  614, 512,  614, 512,  586, 560,  596, 514,  586, 556,  596, 1634,  612, 1636,  616, 1632,  612, 532,  596, 530,  598, 512,  614, 530,  624, 504,  598, 512,  614, 1634,  614, 514,  614, 514,  612, 1634,  616, 514,  614, 512,  614, 530,  596, 1632,  614, 516,  612, 1632,  616, 1632,  616, 512,  614, 1542,  700, 1632,  644, 1604,  614};  // SAMSUNG E0E048B7
  uint16_t rawDataSamsungChannelDown[] = {4498, 4478,  608, 1640,  578, 1668,  608, 1642,  580, 558,  594, 522,  606, 532,  570, 548,  606, 520,  580, 1668,  606, 1642,  606, 1642,  580, 548,  604, 520,  606, 522,  580, 546,  606, 522,  606, 522,  578, 550,  606, 520,  580, 548,  578, 1668,  604, 524,  608, 520,  608, 522,  576, 1670,  580, 1668,  604, 1642,  604, 1642,  580, 548,  604, 1594,  654, 1640,  580, 1668,  606, 46062,  4530, 4450,  580, 1666,  604, 1642,  608, 1640,  580, 550,  606, 522,  604, 522,  604, 522,  606, 522,  604, 1642,  606, 1640,  578, 1670,  578, 548,  580, 548,  604, 522,  580, 548,  606, 522,  578, 548,  604, 524,  578, 548,  606, 522,  578, 1668,  578, 550,  578, 550,  604, 522,  602, 1644,  606, 1642,  606, 1640,  574, 1672,  606, 522,  578, 1668,  604, 1644,  578, 1668,  580};  // SAMSUNG E0E008F7
  uint16_t rawDataSamsungBack[] = {4532, 4444,  610, 1636,  612, 1636,  610, 1636,  584, 560,  598, 516,  610, 516,  610, 518,  608, 520,  608, 1638,  612, 1638,  610, 1636,  610, 518,  610, 516,  608, 518,  584, 544,  610, 518,  608, 520,  608, 518,  608, 518,  610, 1638,  608, 1638,  612, 518,  608, 1638,  608, 520,  608, 1638,  610, 1636,  608, 1640,  610, 518,  610, 518,  608, 1638,  608, 520,  608, 1640,  610, 46066,  4530, 4446,  610, 1636,  610, 1638,  608, 1640,  610, 518,  610, 518,  608, 518,  608, 518,  610, 518,  610, 1636,  610, 1638,  610, 1638,  612, 518,  580, 546,  584, 546,  608, 518,  608, 520,  608, 518,  610, 518,  608, 518,  610, 1638,  610, 1636,  610, 518,  608, 1638,  606, 522,  608, 1640,  608, 1638,  610, 1640,  606, 522,  608, 520,  608, 1638,  582, 560,  596, 1638,  610};  // SAMSUNG E0E01AE5
  uint16_t rawDataSamsungHome[] = {4532, 4442,  614, 1632,  614, 1634,  614, 1634,  614, 514,  614, 512,  616, 512,  614, 514,  614, 514,  610, 1636,  616, 1634,  612, 1634,  614, 514,  614, 514,  614, 532,  598, 512,  612, 516,  614, 1634,  614, 514,  612, 514,  616, 1632,  614, 1634,  614, 1634,  614, 1632,  614, 514,  614, 512,  614, 1634,  616, 1632,  612, 516,  612, 532,  596, 516,  612, 514,  612, 1634,  612, 46060,  4534, 4440,  616, 1632,  612, 1634,  614, 1634,  614, 514,  614, 530,  598, 514,  616, 512,  614, 530,  592, 1638,  614, 1632,  616, 1606,  636, 518,  612, 514,  614, 514,  612, 510,  610, 520,  610, 1566,  682, 534,  592, 516,  614, 1632,  618, 1636,  614, 1632,  614, 1634,  614, 514,  612, 514,  614, 1634,  614, 1634,  614, 514,  612, 514,  612, 516,  606, 524,  638, 1606,  614};  // SAMSUNG E0E09E61
  uint16_t rawDataSamsungPlayPause[] = {4528, 4448,  580, 1668,  606, 1640,  606, 1640,  582, 548,  578, 548,  580, 548,  580, 548,  606, 520,  608, 1640,  608, 1640,  608, 1640,  608, 520,  580, 550,  578, 548,  580, 548,  578, 548,  578, 1668,  580, 548,  580, 546,  578, 1668,  608, 1640,  580, 1668,  580, 548,  578, 1668,  606, 522,  606, 1640,  606, 1642,  578, 550,  580, 546,  604, 524,  578, 1668,  580, 548,  604, 46070,  4498, 4474,  610, 1636,  606, 1640,  580, 1668,  604, 524,  578, 548,  604, 524,  606, 522,  604, 520,  580, 1666,  606, 1644,  578, 1668,  580, 548,  606, 522,  606, 520,  606, 520,  606, 522,  606, 1640,  578, 550,  574, 548,  610, 1642,  580, 1666,  580, 1668,  606, 522,  578, 1668,  604, 522,  606, 1640,  606, 1642,  580, 548,  606, 522,  606, 522,  578, 1670,  604, 522,  580};  // SAMSUNG E0E09D62
  uint16_t rawDataSamsungJoystickUp[] = {4530, 4446,  610, 1636,  610, 1640,  610, 1638,  608, 520,  608, 516,  610, 518,  610, 514,  612, 520,  612, 1636,  608, 1640,  608, 1638,  610, 518,  610, 516,  610, 534,  594, 518,  610, 516,  608, 520,  610, 518,  608, 520,  608, 518,  608, 518,  612, 1636,  612, 1634,  612, 516,  610, 1638,  612, 1634,  608, 1640,  612, 1636,  610, 1638,  610, 520,  610, 530,  594, 1640,  610, 46066,  4528, 4446,  610, 1636,  612, 1632,  610, 1642,  612, 518,  610, 516,  610, 518,  610, 518,  610, 518,  608, 1640,  610, 1638,  610, 1636,  610, 518,  608, 518,  612, 518,  608, 520,  608, 518,  610, 532,  596, 516,  584, 544,  584, 544,  610, 518,  612, 1634,  582, 1666,  608, 520,  608, 1638,  586, 1664,  610, 1638,  612, 1636,  610, 1638,  610, 516,  610, 516,  610, 1638,  610};  // SAMSUNG E0E006F9
  uint16_t rawDataSamsungJoystickDown[] = {4532, 4444,  610, 1636,  608, 1638,  608, 1640,  608, 520,  610, 520,  608, 532,  596, 532,  596, 516,  612, 1634,  612, 1638,  608, 1638,  612, 532,  598, 530,  596, 518,  610, 518,  610, 518,  610, 1636,  610, 518,  610, 518,  608, 518,  610, 518,  610, 1638,  610, 1636,  612, 516,  610, 516,  610, 1638,  612, 1634,  610, 1638,  584, 1666,  608, 530,  598, 518,  610, 1638,  608, 46072,  4532, 4444,  612, 1634,  610, 1636,  612, 1638,  612, 514,  610, 518,  610, 532,  598, 516,  610, 518,  584, 1662,  612, 1636,  612, 1636,  614, 516,  610, 518,  612, 532,  594, 518,  608, 518,  610, 1590,  658, 518,  608, 520,  610, 532,  596, 518,  610, 1638,  610, 1636,  614, 510,  610, 524,  608, 1638,  608, 1640,  612, 1636,  610, 1638,  610, 518,  610, 518,  610, 1636,  610};  // SAMSUNG E0E08679
  uint16_t rawDataSamsungJoystickLeft[] = {4530, 4446,  612, 1632,  612, 1638,  610, 1638,  610, 518,  608, 520,  610, 518,  610, 518,  610, 518,  608, 1638,  638, 1610,  610, 1638,  610, 518,  608, 520,  608, 520,  608, 518,  608, 520,  610, 1636,  610, 520,  608, 1638,  610, 518,  610, 520,  608, 1640,  610, 1638,  610, 518,  610, 518,  610, 1636,  610, 518,  608, 1638,  610, 1638,  610, 518,  608, 518,  610, 1638,  610, 46070,  4526, 4460,  600, 1636,  610, 1638,  612, 1638,  610, 518,  610, 518,  610, 518,  612, 516,  608, 518,  608, 1638,  612, 1636,  610, 1638,  610, 518,  608, 520,  636, 490,  608, 520,  608, 520,  610, 1638,  608, 520,  610, 1638,  610, 518,  608, 520,  610, 1638,  608, 1634,  614, 518,  610, 518,  608, 1640,  610, 518,  610, 1636,  610, 1638,  610, 518,  608, 520,  606, 1640,  612};  // SAMSUNG E0E0A659
  uint16_t rawDataSamsungJoystickRight[] = {4530, 4442,  616, 1630,  612, 1638,  610, 1640,  614, 530,  596, 516,  612, 514,  614, 532,  596, 514,  612, 1636,  614, 1634,  614, 1634,  612, 516,  612, 516,  612, 514,  614, 514,  612, 530,  598, 512,  612, 1628,  620, 514,  612, 514,  614, 514,  614, 1632,  640, 1608,  612, 514,  612, 1636,  614, 514,  614, 1634,  616, 1632,  614, 1634,  612, 516,  612, 514,  612, 1634,  612, 46030,  4564, 4444,  614, 1632,  614, 1634,  614, 1632,  614, 516,  612, 516,  612, 516,  614, 514,  616, 512,  612, 1634,  614, 1634,  614, 1634,  614, 514,  612, 516,  612, 516,  610, 516,  616, 512,  614, 514,  642, 1606,  612, 514,  614, 516,  610, 516,  614, 1634,  614, 1634,  612, 516,  612, 1636,  614, 514,  614, 1634,  612, 1630,  618, 1634,  606, 518,  610, 522,  612, 1634,  614};  // SAMSUNG E0E046B9
  uint16_t rawDataSamsungJoystickEnter[] = {4532, 4444,  614, 1632,  614, 1634,  614, 1632,  612, 516,  612, 516,  614, 514,  614, 530,  596, 516,  610, 1634,  614, 1632,  612, 1634,  614, 532,  596, 514,  612, 534,  596, 516,  610, 518,  612, 514,  612, 516,  610, 530,  598, 1634,  612, 516,  614, 1634,  616, 1634,  612, 516,  610, 1636,  612, 1636,  614, 1634,  612, 516,  612, 1634,  614, 514,  614, 516,  610, 1636,  612, 46060,  4530, 4444,  616, 1632,  614, 1634,  614, 1634,  612, 516,  614, 514,  612, 530,  596, 516,  612, 516,  612, 1636,  614, 1632,  612, 1636,  612, 516,  612, 532,  594, 516,  614, 514,  612, 518,  610, 516,  610, 518,  612, 516,  612, 1634,  612, 516,  612, 1636,  612, 1636,  612, 516,  610, 1636,  612, 1636,  612, 1636,  612, 514,  612, 1636,  612, 516,  612, 516,  610, 1636,  610};  // SAMSUNG E0E016E9
  uint16_t rawDataSamsungNumerical[] = {4528, 4446,  606, 1642,  606, 1644,  584, 1670,  580, 548,  580, 548,  604, 524,  604, 522,  580, 546,  608, 1642,  580, 1670,  578, 1668,  580, 550,  606, 522,  578, 550,  604, 522,  580, 548,  580, 560,  566, 1668,  580, 548,  604, 522,  608, 1640,  604, 524,  578, 1668,  580, 1668,  580, 1668,  606, 524,  606, 1642,  606, 1642,  606, 522,  606, 1642,  580, 548,  578, 550,  604, 46078,  4526, 4448,  582, 1666,  580, 1670,  580, 1668,  606, 522,  606, 520,  604, 522,  580, 548,  578, 550,  578, 1670,  580, 1668,  580, 1668,  580, 548,  578, 550,  606, 522,  606, 522,  580, 546,  580, 548,  578, 1668,  580, 548,  580, 548,  606, 1642,  580, 546,  606, 1642,  606, 1642,  606, 1642,  606, 522,  606, 1642,  606, 1642,  580, 548,  606, 1642,  604, 524,  578, 550,  604};  // SAMSUNG E0E04BB4
  uint16_t rawDataSamsungColorDots[] = {4530, 4448,  580, 1666,  608, 1640,  610, 1638,  606, 522,  606, 522,  580, 548,  604, 524,  578, 548,  580, 1668,  580, 1668,  608, 1640,  608, 522,  578, 548,  606, 522,  580, 548,  580, 546,  608, 520,  578, 1668,  582, 1668,  580, 1668,  580, 548,  606, 522,  606, 1642,  606, 1642,  606, 1642,  580, 546,  604, 526,  606, 522,  606, 1642,  580, 1670,  606, 522,  578, 550,  580, 46108,  4526, 4450,  580, 1666,  612, 1636,  580, 1668,  582, 548,  580, 548,  606, 522,  608, 520,  608, 520,  578, 1668,  580, 1668,  582, 1668,  580, 548,  578, 550,  578, 548,  580, 548,  580, 548,  608, 520,  578, 1668,  606, 1640,  582, 1666,  580, 548,  606, 522,  602, 1644,  606, 1642,  578, 1670,  606, 524,  578, 548,  578, 548,  606, 1642,  580, 1668,  580, 550,  604, 524,  606};  // SAMSUNG E0E0738C
}

#define SIZEOF( ARRAY ) ( sizeof( ARRAY ) / sizeof( ARRAY[0] ) )

#define IRTOPIC_FUNC_PREPARE(devtype, devmodel, devcommand, rawBytes)\
void prepare_##devtype##_##devmodel##_##devcommand()\
{\
  resetSequence();\
  (*mHandler) = std::bind( &IRTVSamsung::handle_##devtype##_##devmodel##_##devcommand, this );\
}\
void handle_##devtype##_##devmodel##_##devcommand()\
{\
  /*Serial.println( "##devtype## ##devmodel## ##devcommand On" );*/\
  mIrSend.sendRaw( rawBytes, SIZEOF( rawBytes ), mIRFrequency );\
  mINet->publish( mStatusTopic.c_str(), "##devtype## ##devmodel## ##devcommand" );\
}
#define IRTOPIC_FUNC_PREPARE_GET(devtype, devmodel, devcommand) prepare_##devtype##_##devmodel##_##devcommand
#define IRTOPIC_TVSAM_FUNC_PREPARE_GET(devcommand) IRTOPIC_FUNC_PREPARE_GET(tv, samsung, devcommand)
#define IRTOPIC_STR(devtype, devmodel, devcommand) std::string mqtt_topic_##devtype##_##devmodel##_##devcommand = "##devtype##_##devmodel##_##dev_command";
#define IRTOPIC_STR_GET(dev_type, dev_model, dev_command) mqtt_topic_##dev_type##_##dev_model##_##dev_command
#define IRTOPIC_TVSAM_STR_GET(dev_command) IRTOPIC_STR_GET(tv, samsung, dev_command)

#define IRTOPIC_STR_AND_FUNC(devtype, devmodel, devcommand, rawBytes)\
IRTOPIC_STR(devtype, devmodel, devcommand)\
IRTOPIC_FUNC_PREPARE(devtype, devmodel, devcommand, rawBytes)

#define IRTOPIC_TVSAM_STR_AND_FUNC(devcommand, rawBytes) IRTOPIC_STR_AND_FUNC(tv, samsung, devcommand, rawBytes)

class IRTVSamsung : public IRTVBase
{
public:
  IRTVSamsung();

  int32_t getLoopsOneCommandCount();
  void subscribe();
  bool process( std::string topic );
private:

  IRTOPIC_TVSAM_STR_AND_FUNC(power, rawDataSamsungPowerOn)
  IRTOPIC_TVSAM_STR_AND_FUNC(volume_up, rawDataSamsungVolumeUp)
  IRTOPIC_TVSAM_STR_AND_FUNC(volume_down, rawDataSamsungVolumeDown)
  IRTOPIC_TVSAM_STR_AND_FUNC(volume_muteunmute, rawDataSamsungVolumeMuteUnmute)
  IRTOPIC_TVSAM_STR_AND_FUNC(channel_up, rawDataSamsungChannelUp)
  IRTOPIC_TVSAM_STR_AND_FUNC(channel_down, rawDataSamsungChannelDown)
  IRTOPIC_TVSAM_STR_AND_FUNC(back, rawDataSamsungBack)
  IRTOPIC_TVSAM_STR_AND_FUNC(home, rawDataSamsungHome)
  IRTOPIC_TVSAM_STR_AND_FUNC(playpause, rawDataSamsungPlayPause)
  IRTOPIC_TVSAM_STR_AND_FUNC(joystick_up, rawDataSamsungJoystickUp)
  IRTOPIC_TVSAM_STR_AND_FUNC(joystick_down, rawDataSamsungJoystickDown)
  IRTOPIC_TVSAM_STR_AND_FUNC(joystick_left, rawDataSamsungJoystickLeft)
  IRTOPIC_TVSAM_STR_AND_FUNC(joystick_right, rawDataSamsungJoystickRight)
  IRTOPIC_TVSAM_STR_AND_FUNC(joystick_enter, rawDataSamsungJoystickEnter)
  IRTOPIC_TVSAM_STR_AND_FUNC(numerical, rawDataSamsungNumerical)
  IRTOPIC_TVSAM_STR_AND_FUNC(colordots, rawDataSamsungColorDots)
  
  std::string mStatusTopic;
  std::map<std::string, std::function<void()>> mTopicListeners;
};

#endif
